<!DOCTYPE html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
 <title>Algorithms.7 </title>



<meta name="description" content="伤口是光能照进来的地方">


<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" id="ct-tracks-google-fonts-css" href="//fonts.googleapis.com/css?family=Raleway%3A400%2C700&amp;subset=latin%2Clatin-ext&amp;ver=4.7.2" type="text/css" media="all">
<link rel="stylesheet" href="https://ne7ermore.github.io/css/font-awesome.min.css" type='text/css' media='all'>

<link href="https://ne7ermore.github.io/css/style.css" rel="stylesheet" id="theme-stylesheet" type='text/css' media='all'>

<link href="https://ne7ermore.github.io/css/custom.css" rel="stylesheet" type='text/css' media='all'>
<link rel="shortcut icon" href="https://ne7ermore.github.io/img/favicon.jpeg" type="image/x-icon">
<link rel="icon" href="https://ne7ermore.github.io/img/favicon.jpeg" type="image/x-icon">


</head>


<body class="post-template-default single single-post single-format-standard ct-body singular singular-post not-front standard">
  
  <div id="overflow-container" class="overflow-container">
    <a class="skip-content" href="#main">Skip to content</a>
    <header id="site-header" class="site-header" role="banner">
      <div class='top-navigation'>
        <div class='container'>

  <div id="menu-secondary" class="menu-container menu-secondary" role="navigation">
    <button id="toggle-secondary-navigation" class="toggle-secondary-navigation"><i class="fa fa-plus"></i></button>

    <div class="menu">

      <ul id="menu-secondary-items" class="menu-secondary-items">
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/categories/tensorflow">TensorFlow</a>
        </li>
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/categories/code">code</a>
        </li>
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/categories/deep-learning">deep-learning</a>
        </li>
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/categories/reinforce-learning">reinforce-learning</a>
        </li>
        

      </ul>

    </div>

  </div>


  <ul class="social-media-icons">


    

    

    

    

    
    <li>
      <a href="mailto:liaoyuanhuo1987@gmail.com" data-animate-hover="pulse" class="email">
        <i class="fa fa-envelope" title="email"></i>
        <span class="screen-reader-text">email</span>
      </a>
    </li>
    

    

    


    
    <li>
      <a href="https://github.com/ne7ermore" data-animate-hover="pulse" class="github" target="_blank">
        <i class="fa fa-github" title="github"></i>
        <span class="screen-reader-text">github</span>
      </a>
    </li>
    

  </ul></div>

      </div>

      <div class="container">
        <div id="title-info" class="title-info">
  <div id='site-title' class='site-title'>
    
    <a href="/"> Nevermore </a>
    </div>
  </div>
  <button id="toggle-navigation" class="toggle-navigation">
    <i class="fa fa-bars"></i>
  </button>

  <div id="menu-primary-tracks" class="menu-primary-tracks"></div>
  <div id="menu-primary" class="menu-container menu-primary" role="navigation">
    
    <p class="site-description">Why so serious</p>
    

    <div class="menu">
      <ul id="menu-primary-items" class="menu-primary-items">
        
        
        <li id="menu-item" class='menu-item menu-item-type-custom menu-item-object-custom '>
          <a href="https://ne7ermore.github.io/">Home</a>
        </li>
        
        <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://ne7ermore.github.io/intro/">Intro</a>
        </li>
        
      </ul>
    </div>

  </div>

      </div>
    </header>

    <div id="main" class="main" role="main">

      
  <div id="loop-container" class="loop-container">
    

      <div class="post type-post status-publish format-standard hentry category-standard category-travel entry full-without-featured odd excerpt-1">

        
        <div class="entry-meta">
          <span class="date">December 27</span>	<span> / </span>

          <span class="author">
            
            <a href="https://ne7ermore.github.io" title="Posts by Nevermore" rel="author">Nevermore</a>
            
          </span>


          
          <span class="category">
            <span> / </span>

            <a href="/categories/code">code</a>
          </span>
          


        </div>
        <div class='entry-header'>
          <h1 class='entry-title'> Algorithms.7</h1>
        </div>
        <div class="entry-container">
          <div class="entry-content">
            <article>
              <p>矩阵</p>

<p><a href="https://github.com/ne7ermore/playground/tree/master/python/matrix">代码</a></p>

<ul>
<li>旋转</li>
</ul>

<pre><code class="language-python">from copy import deepcopy


def rotate90(m):
    el_len = len(m[0])
    new_m = [[0]*len(m) for _ in range(el_len)]
    for i, row in enumerate(m):
        for j, elem in enumerate(row):
            new_m[el_len-1-j][i] = elem

    return new_m


def rotate180(m):
    for row in m:
        row = row.reverse()

    return m


def rotate270(m):
    new_m = [[0]*len(m) for _ in range(len(m[0]))]
    for i, row in enumerate(m):
        for j, elem in enumerate(row):
            new_m[j][i] = elem

    return new_m


if __name__ == &quot;__main__&quot;:
    m = [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12]]

    m1 = deepcopy(m)
    assert rotate90(m1) == [[4, 8, 12], [3, 7, 11], [2, 6, 10], [1, 5, 9]]

    m1 = deepcopy(m)
    assert rotate180(m1) == [[4, 3, 2, 1], [8, 7, 6, 5], [12, 11, 10, 9]]

    m1 = deepcopy(m)
    assert rotate270(m1) == [[1, 5, 9], [2, 6, 10], [3, 7, 11], [4, 8, 12]]
</code></pre>

<ul>
<li>炸弹人</li>
</ul>

<pre><code>Given a 2D grid, each cell is either a wall 'W',
an enemy 'E' or empty '0' (the number zero),
return the maximum enemies you can kill using one bomb.
The bomb kills all the enemies in the same row and column from
the planted point until it hits the wall since the wall is too strong
to be destroyed.
Note that you can only put the bomb at an empty cell.
Example:
For the given grid
0 E 0 0
E 0 W E
0 E 0 0
return 3. (Placing a bomb at (1,1) kills 3 enemies)
</code></pre>

<p>思路： 逐一查看行和列</p>

<pre><code class="language-python">import numpy as np


def bomb_row(row, index):
    kills = 0
    step = index
    while step &gt; 0:
        step -= 1
        if row[step] == &quot;e&quot;:
            kills += 1
        elif row[step] == &quot;w&quot;:
            break

    step = index
    while step &lt; len(row)-1:
        step += 1
        if row[step] == &quot;e&quot;:
            kills += 1
        elif row[step] == &quot;w&quot;:
            break

    return kills


def bomb_enemy(grid):
    kills = 0
    for i, row in enumerate(grid):
        for j, elm in enumerate(row):
            if elm == &quot;0&quot;:
                kills = max(kills, bomb_row(row, j)+bomb_row(grid[:, j], i))

    return kills


if __name__ == &quot;__main__&quot;:
    grid = np.asarray([[0, &quot;e&quot;, 0, 0, &quot;e&quot;],
                       [&quot;e&quot;, 0, &quot;e&quot;, &quot;w&quot;, &quot;e&quot;],
                       [0, &quot;e&quot;, 0, 0, 0],
                       [0, &quot;e&quot;, 0, 0, 0]
                       ])
    assert bomb_enemy(grid) == 5
</code></pre>

<ul>
<li>稀疏矩阵点乘</li>
</ul>

<p>&rdquo;&ldquo;&rdquo;
Given two sparse matrices A and B, return the result of AB.
You may assume that A&rsquo;s column number is equal to B&rsquo;s row number.
Example:
A = [
  [ 1, 0, 0],
  [-1, 0, 3]
]
B = [
  [ 7, 0, 0 ],
  [ 0, 0, 0 ],
  [ 0, 0, 1 ]
]
     |  1 0 0 |   | 7 0 0 |   |  7 0 0 |
AB = | -1 0 3 | x | 0 0 0 | = | -7 0 3 |
                  | 0 0 1 |
&ldquo;&rdquo;&rdquo;</p>

<p>思路：找出非零的然后计算</p>

<pre><code class="language-python">import numpy as np


def multiply(a, b):
    ar, ae = a.shape
    br, be = b.shape
    assert ae == br

    c = np.zeros([ar, be])

    for i, arow in enumerate(a):
        for j, aelem in enumerate(arow):
            if aelem:
                for k, belem in enumerate(b[j]):
                    if belem:
                        c[i, k] += belem*aelem

    return c


if __name__ == &quot;__main__&quot;:
    a = np.array([[1, 0, 0],
                  [-1, 0, 3]])

    b = np.array([[7, 0, 0],
                  [0, 0, 0],
                  [0, 0, 1]])

    print(multiply(a, b))
</code></pre>

<ul>
<li>旋转遍历</li>
</ul>

<p>&rdquo;&ldquo;&rdquo;
Given a matrix of m x n elements (m rows, n columns),
return all elements of the matrix in spiral order.
For example,
Given the following matrix:
[
 [ 1, 2, 3 ],
 [ 4, 5, 6 ],
 [ 7, 8, 9 ]
]
You should return [1,2,3,6,9,8,7,4,5].
&ldquo;&rdquo;&rdquo;</p>

<p>思路：分方向，给出起始坐标，不停更新矩阵</p>

<pre><code class="language-python">import numpy as np


def skip(matrix, direction, i, j, res):
    n, m = matrix.shape
    if direction == 0:
        while j &lt; m:
            res.append(matrix[i, j])
            j += 1
        matrix = matrix[i+1:, :]
        n, m = matrix.shape
        return matrix, 0, m-1, 1

    elif direction == 1:
        while i &lt; n:
            res.append(matrix[i, j])
            i += 1
        matrix = matrix[:, :m-1]
        n, m = matrix.shape
        return matrix, n-1, m-1, 2

    elif direction == 2:
        while j &gt;= 0:
            res.append(matrix[i, j])
            j -= 1

        matrix = matrix[:n-1, :]
        n, m = matrix.shape
        return matrix, n-1, 0, 3
    else:
        while i &gt;= 0:
            res.append(matrix[i, j])
            i -= 1
        return matrix[:, j+1:], 0, 0, 0


def spiral_traversal(matrix):
    res, direction = [], 0
    n, m = matrix.shape
    i, j = 0, 0
    while len(res) &lt; n*m:
        matrix, i, j, direction = skip(matrix, direction, i, j, res)

    return res


if __name__ == &quot;__main__&quot;:
    mat = np.asarray([[1, 2, 3, 4],
                      [5, 6, 7, 8],
                      [9, 10, 11, 12],
                      [13, 14, 15, 16]])
    assert spiral_traversal(
        mat) == [1, 2, 3, 4, 8, 12, 16, 15, 14, 13, 9, 5, 6, 7, 11, 10]
</code></pre>

<ul>
<li>计算路径</li>
</ul>

<p>&rdquo;&ldquo;&rdquo;
Count the number of unique paths from a[0][0] to a[m-1][n-1]
We are allowed to move either right or down from a cell in the matrix.
Approaches-
(i) Recursion- Recurse starting from a[m-1][n-1], upwards and leftwards,
               add the path count of both recursions and return count.
(ii) Dynamic Programming- Start from a[0][0].Store the count in a count
                          matrix. Return count[m-1][n-1]
T(n)- O(mn), S(n)- O(mn)
&ldquo;&rdquo;&rdquo;</p>

<p>思路：和爬梯子一样，斐波那契数</p>

<pre><code>import numpy as np


def count_paths(m, n):
    if m &lt; 1 or n &lt; 1:
        return -1

    count = np.zeros((n, m))
    count[0, :] = 1
    count[:, 0] = 1

    for i in range(1, n):
        for j in range(1, m):
            count[i, j] = count[i, j-1] + count[i-1, j]

    return count[-1, -1]


if __name__ == &quot;__main__&quot;:
    assert count_paths(3, 4) == 10
</code></pre>
            </article>
          </div>
          
      <div class='entry-meta-bottom'>
        

  <div class="entry-categories"><p><span>Categories</span>
    
    <a href="/categories/tensorflow" title="View all posts in TensorFlow">TensorFlow</a>
    <a href="/categories/code" title="View all posts in code">code</a>
    <a href="/categories/deep-learning" title="View all posts in deep-learning">deep-learning</a>
    <a href="/categories/reinforce-learning" title="View all posts in reinforce-learning">reinforce-learning</a>
  </p>
</div>



<div class="entry-tags"><p><span>Tags</span>
  
  <a href="/tags/cpp" title="View all posts tagged cpp">cpp</a>
  
  <a href="/tags/golang" title="View all posts tagged golang">golang</a>
  
  <a href="/tags/python" title="View all posts tagged python">python</a>
  
  <a href="/tags/%E7%AE%97%E6%B3%95" title="View all posts tagged 算法">算法</a>
  

</p></div>	</div>

<div class="author-meta">

  <div class="author">
    <img alt='Nevermore' src="https://www.gravatar.com/avatar/441d6f3623599f66569ae8478cf21f68?s=100&d=identicon" class='avatar avatar-72 photo' height='72' width='72'>

    <span>
      Written by:<a href="https://ne7ermore.github.io" title="Posts by Nevermore" rel="author">Nevermore</a>        </span>
    </div>
    <div class="bio">
      
      <p>步步生姿，空锁满庭花雨。胜将娇花比。</p>
      


      

    


  



<a class="email" target="_blank"
href="mailto:liaoyuanhuo1987@gmail.com">
<i class="fa fa-envelope"
title="email icon"></i>
</a>







<a class="github" target="_blank"
href="https://github.com/ne7ermore">
<i class="fa fa-github"
title="github icon"></i>
</a>


</div>
</div>

</div>
</div>

<section id="comments" class="comments">
  

  




</section>
</div>

 



    </div>

    <footer id="site-footer" class="site-footer" role="contentinfo">
	<h1>
    
    <a href=""> Nevermore </a>
    
	</h1>

			
			<p class="site-description">Why so serious</p>
			

		<div id="menu-footer" class="menu-container menu-footer" role="navigation">
		<div class="menu">

      <ul id="menu-footer-items" class="menu-footer-items">
        
</ul>

</div>	</div>

<ul class="social-media-icons">

        

        


        

        

        
        <li>
        <a href="mailto:liaoyuanhuo1987@gmail.com"  class="email">
            <i class="fa fa-envelope" title="email"></i>
            <span class="screen-reader-text">email</span>
        </a>
        </li>
        

        

        


        
        <li>
        <a href="https://github.com/ne7ermore"  class="github" target="_blank">
            <i class="fa fa-github" title="github"></i>
            <span class="screen-reader-text">github</span>
        </a>
        </li>
        
				</ul>	<div class="design-credit">
		
		<p>&copy; Nevermore | 2019</p>
		
    </div>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],
            displayMath: [['$$','$$'], ['\[','\]']],
            processEscapes: true,
            processEnvironments: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            TeX: { equationNumbers: { autoNumber: "AMS" },
                extensions: ["AMSmath.js", "AMSsymbols.js"] }
            }
        });
    </script>
</footer>

  </div>
  <script src="https://ne7ermore.github.io/js/jquery.min.js"></script>
<script src="https://ne7ermore.github.io/js/jquerymigrate.js"></script>
<script src="https://ne7ermore.github.io/js/production.min.js"></script>

</body>
</html>
